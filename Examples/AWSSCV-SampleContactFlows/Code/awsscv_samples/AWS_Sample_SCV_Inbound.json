{
  "ContactFlow": {
    "Name": "AWS_Sample_SCV_Inbound",
    "Type": "CONTACT_FLOW",
    "Description": "Modified from: Sample_SCV_Inbound_Flow_With_Transcription - Incorproates changes found in AWS_Sample_SCV_Inbound. Also passes a parameter to indicate if transcription should be present.",
    "Content": "{\"Version\":\"2019-10-30\",\"StartAction\":\"a2e856a6-b552-40be-a599-9f77fd6eb79a\",\"Metadata\":{\"entryPointPosition\":{\"x\":15,\"y\":15},\"snapToGrid\":false,\"ActionMetadata\":{\"a2e856a6-b552-40be-a599-9f77fd6eb79a\":{\"position\":{\"x\":24.366668701171875,\"y\":181}},\"a355c649-31f7-4080-b6e1-69b0f8f38163\":{\"position\":{\"x\":2392.366668701172,\"y\":91},\"useDynamic\":false},\"5fdb094d-aee2-4ea6-8e55-d257af32ecb5\":{\"position\":{\"x\":2637.943328857422,\"y\":89.66091918945312}},\"48e75255-35a6-49e7-9038-7a76525e9227\":{\"position\":{\"x\":593,\"y\":369}},\"9a140a86-ac4d-4583-950c-29c7fcf5791d\":{\"position\":{\"x\":839,\"y\":368},\"useDynamic\":false},\"ed704d14-0a7a-481f-8433-ae2737298ab2\":{\"position\":{\"x\":1079,\"y\":366}},\"38305b2c-ffde-4811-9c77-28971cf722fc\":{\"position\":{\"x\":1598,\"y\":368}},\"1a2ac491-46e6-4b57-b240-8386dea00a30\":{\"position\":{\"x\":2393.366668701172,\"y\":329}},\"6e346866-f534-41dd-a7f8-1185143f6471\":{\"position\":{\"x\":2875.366668701172,\"y\":90},\"useDynamic\":false},\"88c4c809-af05-4960-8260-96d1a0cfe6c8\":{\"position\":{\"x\":2176,\"y\":549},\"useDynamic\":false},\"b5886cf6-27dd-44d4-a958-a1cd084c3cb4\":{\"position\":{\"x\":2951,\"y\":425}},\"afb3e3e1-3740-48d9-9588-1cdb3c4720bf\":{\"position\":{\"x\":535,\"y\":93},\"useDynamic\":false},\"af89b7be-14c3-40e7-a9ab-643748abe7ec\":{\"position\":{\"x\":1317,\"y\":467},\"dynamicMetadata\":{\"methodName\":false},\"useDynamic\":false},\"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6\":{\"position\":{\"x\":2117.366668701172,\"y\":92},\"useDynamic\":false},\"5a06a301-de90-4c6b-96cb-78f3645a6aa9\":{\"position\":{\"x\":1930.3666687011719,\"y\":336}},\"283ba344-b7f8-4493-bddd-a6d243b14ba8\":{\"position\":{\"x\":1569.3666687011719,\"y\":95}},\"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9\":{\"position\":{\"x\":1844.3666687011719,\"y\":94},\"useDynamic\":true,\"queue\":\"Sample\"},\"817738cb-2e38-40d3-b2b8-98d4165a4f40\":{\"position\":{\"x\":285.3666687011719,\"y\":89},\"useDynamic\":false},\"a1a9d0df-6f71-41fd-bee2-8b236ffee023\":{\"position\":{\"x\":31.513153076171875,\"y\":760.0933227539062}},\"fc899ff7-c46a-452b-939c-33e5e520c9a2\":{\"position\":{\"x\":25.366668701171875,\"y\":362}},\"ca7b58ed-98be-470f-af1b-b02aeab893e0\":{\"position\":{\"x\":26.366668701171875,\"y\":542},\"contactFlow\":{\"id\":\"%%AWSSCVAgentWhisperWithStreaming%%\",\"text\":\"AWSSCVAgentWhisperWithStreaming\"},\"customerOrAgent\":false,\"useDynamic\":false}}},\"Actions\":[{\"Identifier\":\"a2e856a6-b552-40be-a599-9f77fd6eb79a\",\"Parameters\":{\"FlowLoggingBehavior\":\"Enabled\"},\"Transitions\":{\"NextAction\":\"fc899ff7-c46a-452b-939c-33e5e520c9a2\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"UpdateFlowLoggingBehavior\"},{\"Identifier\":\"a355c649-31f7-4080-b6e1-69b0f8f38163\",\"Transitions\":{\"NextAction\":\"1a2ac491-46e6-4b57-b240-8386dea00a30\",\"Errors\":[{\"NextAction\":\"1a2ac491-46e6-4b57-b240-8386dea00a30\",\"ErrorType\":\"NoMatchingError\"},{\"NextAction\":\"5fdb094d-aee2-4ea6-8e55-d257af32ecb5\",\"ErrorType\":\"QueueAtCapacity\"}],\"Conditions\":[]},\"Type\":\"TransferContactToQueue\"},{\"Identifier\":\"5fdb094d-aee2-4ea6-8e55-d257af32ecb5\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"queue limite exceeded\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"6e346866-f534-41dd-a7f8-1185143f6471\",\"Errors\":[{\"NextAction\":\"6e346866-f534-41dd-a7f8-1185143f6471\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"48e75255-35a6-49e7-9038-7a76525e9227\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"lambda loop fail\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"9a140a86-ac4d-4583-950c-29c7fcf5791d\",\"Errors\":[{\"NextAction\":\"9a140a86-ac4d-4583-950c-29c7fcf5791d\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"9a140a86-ac4d-4583-950c-29c7fcf5791d\",\"Parameters\":{\"Text\":\"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.\"},\"Transitions\":{\"NextAction\":\"ed704d14-0a7a-481f-8433-ae2737298ab2\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"ed704d14-0a7a-481f-8433-ae2737298ab2\",\"Type\":\"DisconnectParticipant\",\"Parameters\":{},\"Transitions\":{}},{\"Identifier\":\"38305b2c-ffde-4811-9c77-28971cf722fc\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"set voiceObjectId failed\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"Errors\":[{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"1a2ac491-46e6-4b57-b240-8386dea00a30\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"transfer to queue failed\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"Errors\":[{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"6e346866-f534-41dd-a7f8-1185143f6471\",\"Parameters\":{\"Text\":\"We are experiencing a higher than normal call volume.  Please try back later. Sorry for the inconvenience.\"},\"Transitions\":{\"NextAction\":\"b5886cf6-27dd-44d4-a958-a1cd084c3cb4\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"Parameters\":{\"Text\":\"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.\"},\"Transitions\":{\"NextAction\":\"b5886cf6-27dd-44d4-a958-a1cd084c3cb4\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"b5886cf6-27dd-44d4-a958-a1cd084c3cb4\",\"Type\":\"DisconnectParticipant\",\"Parameters\":{},\"Transitions\":{}},{\"Identifier\":\"afb3e3e1-3740-48d9-9588-1cdb3c4720bf\",\"Parameters\":{\"LoopCount\":\"2\"},\"Transitions\":{\"NextAction\":\"48e75255-35a6-49e7-9038-7a76525e9227\",\"Errors\":[],\"Conditions\":[{\"NextAction\":\"48e75255-35a6-49e7-9038-7a76525e9227\",\"Condition\":{\"Operator\":\"Equals\",\"Operands\":[\"DoneLooping\"]}},{\"NextAction\":\"af89b7be-14c3-40e7-a9ab-643748abe7ec\",\"Condition\":{\"Operator\":\"Equals\",\"Operands\":[\"ContinueLooping\"]}}]},\"Type\":\"Loop\"},{\"Identifier\":\"af89b7be-14c3-40e7-a9ab-643748abe7ec\",\"Parameters\":{\"LambdaFunctionARN\":\"%%INVOKE_TELEPHONY_FUNCTION_ARN%%\",\"InvocationTimeLimitSeconds\":\"8\",\"LambdaInvocationAttributes\":{\"methodName\":\"createVoiceCall\"}},\"Transitions\":{\"NextAction\":\"283ba344-b7f8-4493-bddd-a6d243b14ba8\",\"Errors\":[{\"NextAction\":\"afb3e3e1-3740-48d9-9588-1cdb3c4720bf\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"InvokeLambdaFunction\"},{\"Identifier\":\"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6\",\"Parameters\":{\"Text\":\"Transferring to Customer Support....\"},\"Transitions\":{\"NextAction\":\"a355c649-31f7-4080-b6e1-69b0f8f38163\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"5a06a301-de90-4c6b-96cb-78f3645a6aa9\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"set working queue failed\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"Errors\":[{\"NextAction\":\"88c4c809-af05-4960-8260-96d1a0cfe6c8\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"283ba344-b7f8-4493-bddd-a6d243b14ba8\",\"Parameters\":{\"Attributes\":{\"voiceCallId\":\"$.External.voiceCallId\"}},\"Transitions\":{\"NextAction\":\"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9\",\"Errors\":[{\"NextAction\":\"38305b2c-ffde-4811-9c77-28971cf722fc\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9\",\"Parameters\":{\"QueueId\":\"$.Attributes.Sample\"},\"Transitions\":{\"NextAction\":\"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6\",\"Errors\":[{\"NextAction\":\"5a06a301-de90-4c6b-96cb-78f3645a6aa9\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactTargetQueue\"},{\"Identifier\":\"817738cb-2e38-40d3-b2b8-98d4165a4f40\",\"Parameters\":{\"Text\":\"Thank you for calling. All calls may be monitored for quality assurance.\"},\"Transitions\":{\"NextAction\":\"afb3e3e1-3740-48d9-9588-1cdb3c4720bf\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"a1a9d0df-6f71-41fd-bee2-8b236ffee023\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"failed to set  agent whisper\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"817738cb-2e38-40d3-b2b8-98d4165a4f40\",\"Errors\":[{\"NextAction\":\"817738cb-2e38-40d3-b2b8-98d4165a4f40\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"fc899ff7-c46a-452b-939c-33e5e520c9a2\",\"Parameters\":{\"RecordingBehavior\":{\"RecordedParticipants\":[]}},\"Transitions\":{\"NextAction\":\"ca7b58ed-98be-470f-af1b-b02aeab893e0\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"UpdateContactRecordingBehavior\"},{\"Identifier\":\"ca7b58ed-98be-470f-af1b-b02aeab893e0\",\"Parameters\":{\"EventHooks\":{\"AgentWhisper\":\"%%AWSSCVAgentWhisperWithStreaming%%\"}},\"Transitions\":{\"NextAction\":\"817738cb-2e38-40d3-b2b8-98d4165a4f40\",\"Errors\":[{\"NextAction\":\"a1a9d0df-6f71-41fd-bee2-8b236ffee023\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactEventHooks\"}]}",
    "Tags": {}
  }
}
