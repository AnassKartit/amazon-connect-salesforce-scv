{"modules":[{"id":"fb47cb81-7c12-4ad9-b12f-89f91b840750","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"1cfe732c-ec05-4708-bb79-5c3480b0e873"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":17,"y":181}}},{"id":"66b9f12a-b8b9-4835-9eba-0b837e6cf03d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"1aac3d82-12e9-4bd9-8340-2c08240e59b7"}],"parameters":[{"name":"Text","value":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":540,"y":317},"useDynamic":false}},{"id":"1aac3d82-12e9-4bd9-8340-2c08240e59b7","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":780,"y":315}}},{"id":"2bde5824-af9f-4885-8e5b-70e0db28986f","type":"SetAttributes","branches":[{"condition":"Success","transition":"66b9f12a-b8b9-4835-9eba-0b837e6cf03d"},{"condition":"Error","transition":"66b9f12a-b8b9-4835-9eba-0b837e6cf03d"}],"parameters":[{"name":"Attribute","value":"lambda loop fail","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":294,"y":318}}},{"id":"1cfe732c-ec05-4708-bb79-5c3480b0e873","type":"Loop","branches":[{"condition":"Looping","transition":"b43becd2-b08d-4320-8b7f-a0eadfd42c63"},{"condition":"Complete","transition":"2bde5824-af9f-4885-8e5b-70e0db28986f"}],"parameters":[{"name":"LoopCount","value":"2"}],"metadata":{"position":{"x":253,"y":43},"useDynamic":false}},{"id":"b43becd2-b08d-4320-8b7f-a0eadfd42c63","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a84eafe1-3bf5-4d37-bf24-4d17623bebf5"},{"condition":"Error","transition":"1cfe732c-ec05-4708-bb79-5c3480b0e873"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:376407789201:function:SCV08112020-InvokeTelephonyIntegrationApiFunction","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"methodName","value":"createTransferVC","namespace":null}],"metadata":{"position":{"x":1033,"y":445},"dynamicMetadata":{"methodName":false},"useDynamic":false},"target":"Lambda"},{"id":"a84eafe1-3bf5-4d37-bf24-4d17623bebf5","type":"SetAttributes","branches":[{"condition":"Success","transition":"1c2943d7-e498-4749-8bf1-a60787516dc2"},{"condition":"Error","transition":"e28f4da6-59a6-49b8-b14a-041179deb33a"}],"parameters":[{"name":"Attribute","value":"voiceCallId","key":"voiceCallId","namespace":"External"}],"metadata":{"position":{"x":1257,"y":82}}},{"id":"1c2943d7-e498-4749-8bf1-a60787516dc2","type":"SetQueue","branches":[{"condition":"Success","transition":"5e641eb0-0e27-4f78-9e3e-5d8cd35a4ac5"},{"condition":"Error","transition":"bfabe259-f979-46a1-834e-b45d2e38b46b"}],"parameters":[{"name":"Agent","value":"Agent.UserName","namespace":"System","resourceName":null}],"metadata":{"position":{"x":1532,"y":83},"useDynamic":true,"queue":"Agent.UserName"}},{"id":"5e641eb0-0e27-4f78-9e3e-5d8cd35a4ac5","type":"PlayPrompt","branches":[{"condition":"Success","transition":"69cf47be-6d08-4d27-9194-e3593d746bd8"}],"parameters":[{"name":"Text","value":"Transferring now to an Available Agent","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1824,"y":82},"useDynamic":false}},{"id":"69cf47be-6d08-4d27-9194-e3593d746bd8","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"},{"condition":"Error","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"}],"parameters":[],"metadata":{"position":{"x":2088.111572265625,"y":79.34683227539062},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"e28f4da6-59a6-49b8-b14a-041179deb33a","type":"SetAttributes","branches":[{"condition":"Success","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"},{"condition":"Error","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"}],"parameters":[{"name":"Attribute","value":"set voiceObjectId failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":1319,"y":362}}},{"id":"bfabe259-f979-46a1-834e-b45d2e38b46b","type":"SetAttributes","branches":[{"condition":"Success","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"},{"condition":"Error","transition":"f3aac674-0379-4ba8-8b32-bfd104cd942f"}],"parameters":[{"name":"Attribute","value":"set Agent Queue failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":1612,"y":361}}},{"id":"f3aac674-0379-4ba8-8b32-bfd104cd942f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"86b37823-c5c6-4f38-91ed-55d0d32071f5"}],"parameters":[{"name":"Text","value":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2065,"y":608},"useDynamic":false}},{"id":"86b37823-c5c6-4f38-91ed-55d0d32071f5","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2375,"y":360}}}],"version":"1","type":"agentTransfer","start":"fb47cb81-7c12-4ad9-b12f-89f91b840750","metadata":{"entryPointPosition":{"x":15,"y":21},"snapToGrid":false,"name":"AWS_Sample_SCV_Agent_Transfer","description":"Modified from: Sample_SCV_Agent_Transfer - Expands on the default Salesforce version by adding a loop around the Telephony Integration Lambda. Also sets the agent transfer to use personal queues instead of the direct connection method.","type":"agentTransfer","status":"saved","hash":"4f37ac519ce4886bacf3d0e57c55619e1e8082015430fa0cd83dc689240c24c3"}}