{
  "ContactFlow": {
    "Name": "AWSSCVAgentWhisperWithStreaming",
    "Type": "AGENT_WHISPER",
    "Description": "Agent whisper that initiates media and transcriptions streaming. Announces the incoming call queue.",
    "Content": "{\"Version\":\"2019-10-30\",\"StartAction\":\"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b\",\"Metadata\":{\"entryPointPosition\":{\"x\":15,\"y\":15},\"snapToGrid\":false,\"ActionMetadata\":{\"ee2699b2-e221-4359-81e3-93cabccee19f\":{\"position\":{\"x\":1715,\"y\":203}},\"36486d54-8937-4d9e-8d71-22fcc4e82b15\":{\"position\":{\"x\":659,\"y\":207}},\"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b\":{\"position\":{\"x\":155.33856201171875,\"y\":16.48160171508789}},\"7229bd8e-9798-4e68-b79d-ec9d068da21d\":{\"position\":{\"x\":392,\"y\":18.64480296217932},\"conditionMetadata\":[{\"id\":\"711ecaaa-6458-4a52-a566-1fb90ba094c7\",\"operator\":{\"name\":\"Starts with\",\"value\":\"StartsWith\",\"shortDisplay\":\"starts with\"},\"value\":\"1\"}]},\"03d520a8-b877-46ce-a370-93672987f175\":{\"position\":{\"x\":1447,\"y\":499.6448029621793},\"useDynamic\":false},\"2eb03097-b1fe-43c6-987f-e3fccf183708\":{\"position\":{\"x\":1450,\"y\":207},\"useDynamic\":true},\"3a7b434f-6da1-4b32-ade0-9c9d23af8552\":{\"position\":{\"x\":1167,\"y\":458.99999999999994}},\"9e623f8c-f5f2-4122-8c01-3fc27ef95771\":{\"position\":{\"x\":900,\"y\":207},\"fromCustomer\":true,\"toCustomer\":true},\"76da5f21-2c27-40df-86c3-771c853922ee\":{\"position\":{\"x\":1160,\"y\":206},\"dynamicMetadata\":{},\"useDynamic\":false}}},\"Actions\":[{\"Identifier\":\"ee2699b2-e221-4359-81e3-93cabccee19f\",\"Parameters\":{},\"Transitions\":{},\"Type\":\"EndFlowExecution\"},{\"Identifier\":\"36486d54-8937-4d9e-8d71-22fcc4e82b15\",\"Parameters\":{\"Attributes\":{\"languageCode\":\"en-US\"}},\"Transitions\":{\"NextAction\":\"9e623f8c-f5f2-4122-8c01-3fc27ef95771\",\"Errors\":[{\"NextAction\":\"9e623f8c-f5f2-4122-8c01-3fc27ef95771\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b\",\"Parameters\":{\"FlowLoggingBehavior\":\"Enabled\"},\"Transitions\":{\"NextAction\":\"7229bd8e-9798-4e68-b79d-ec9d068da21d\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"UpdateFlowLoggingBehavior\"},{\"Identifier\":\"7229bd8e-9798-4e68-b79d-ec9d068da21d\",\"Parameters\":{\"ComparisonValue\":\"$.MediaStreams.Customer.Audio.StartTimestamp\"},\"Transitions\":{\"NextAction\":\"36486d54-8937-4d9e-8d71-22fcc4e82b15\",\"Errors\":[{\"NextAction\":\"36486d54-8937-4d9e-8d71-22fcc4e82b15\",\"ErrorType\":\"NoMatchingCondition\"}],\"Conditions\":[{\"NextAction\":\"2eb03097-b1fe-43c6-987f-e3fccf183708\",\"Condition\":{\"Operator\":\"TextStartsWith\",\"Operands\":[\"1\"]}}]},\"Type\":\"Compare\"},{\"Identifier\":\"03d520a8-b877-46ce-a370-93672987f175\",\"Parameters\":{\"Text\":\"Transcript disabled.\"},\"Transitions\":{\"NextAction\":\"2eb03097-b1fe-43c6-987f-e3fccf183708\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"2eb03097-b1fe-43c6-987f-e3fccf183708\",\"Parameters\":{\"Text\":\"$.Queue.Name\"},\"Transitions\":{\"NextAction\":\"ee2699b2-e221-4359-81e3-93cabccee19f\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"3a7b434f-6da1-4b32-ade0-9c9d23af8552\",\"Parameters\":{\"Attributes\":{\"sfdc-RTT_flag__c\":\"0\",\"init_error\":\"streaming init failed\"}},\"Transitions\":{\"NextAction\":\"03d520a8-b877-46ce-a370-93672987f175\",\"Errors\":[{\"NextAction\":\"03d520a8-b877-46ce-a370-93672987f175\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"9e623f8c-f5f2-4122-8c01-3fc27ef95771\",\"Parameters\":{\"MediaStreamingState\":\"Enabled\",\"MediaStreamType\":\"Audio\",\"Participants\":[{\"ParticipantType\":\"Customer\",\"MediaDirections\":[\"From\",\"To\"]}]},\"Transitions\":{\"NextAction\":\"76da5f21-2c27-40df-86c3-771c853922ee\",\"Errors\":[{\"NextAction\":\"3a7b434f-6da1-4b32-ade0-9c9d23af8552\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactMediaStreamingBehavior\"},{\"Identifier\":\"76da5f21-2c27-40df-86c3-771c853922ee\",\"Parameters\":{\"LambdaFunctionARN\":\"%%KVS_CONSUMER_TRIGGER_ARN%%\",\"InvocationTimeLimitSeconds\":\"8\"},\"Transitions\":{\"NextAction\":\"2eb03097-b1fe-43c6-987f-e3fccf183708\",\"Errors\":[{\"NextAction\":\"3a7b434f-6da1-4b32-ade0-9c9d23af8552\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"InvokeLambdaFunction\"}]}",
    "Tags": {}
  }
}
