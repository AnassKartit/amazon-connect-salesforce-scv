{
  "ContactFlow": {
    "Name": "AWS_Sample_SCV_Outbound_Flow_with_Transcription",
    "Type": "OUTBOUND_WHISPER",
    "Description": "Modified from: Sample_SCV_Outbound_Flow_With_Transcription - Adds error messaging for KVS/Lambda initialization failures. Passes a parameter to indicate if transcription should be present.",
    "Content": "{\"Version\":\"2019-10-30\",\"StartAction\":\"93a996a0-d7a8-492e-a2e8-a68cb20f18d9\",\"Metadata\":{\"entryPointPosition\":{\"x\":15,\"y\":15},\"snapToGrid\":false,\"ActionMetadata\":{\"93a996a0-d7a8-492e-a2e8-a68cb20f18d9\":{\"position\":{\"x\":39.38333129882813,\"y\":175.5}},\"6b76aefa-8b96-4766-a3b8-308dd9833764\":{\"position\":{\"x\":422.3833312988281,\"y\":429}},\"e54af739-9aec-4259-a54c-b1b45bf29599\":{\"position\":{\"x\":1516.3833312988281,\"y\":702},\"useDynamic\":false},\"e2b252f0-ae0b-4489-8198-60e5eef36ce8\":{\"position\":{\"x\":1793.8594055175781,\"y\":699.55029296875}},\"06696b27-35cc-47c3-b775-838c0b326f81\":{\"position\":{\"x\":351.3833312988281,\"y\":174},\"fromCustomer\":true,\"toCustomer\":false},\"52e05d05-39db-4dc2-a37c-0678b693b466\":{\"position\":{\"x\":38.38333129882813,\"y\":389.5}},\"b8c6d167-dfd1-4ee2-b160-408e1690249a\":{\"position\":{\"x\":37.904012564034936,\"y\":608}},\"0ed25db1-2a6c-4c46-bec1-d953e3834a54\":{\"position\":{\"x\":1367.3833312988281,\"y\":184}},\"44fec6b4-fb4f-46b9-846e-dc83908d5e73\":{\"position\":{\"x\":1093.3833312988281,\"y\":461}},\"be0d4794-8c59-427c-83d9-67906ab1c3d4\":{\"position\":{\"x\":666.3833312988281,\"y\":175},\"conditionMetadata\":[{\"id\":\"014f6530-1542-4719-b5db-db6d796a5ac3\",\"operator\":{\"name\":\"Equals\",\"value\":\"Equals\",\"shortDisplay\":\"=\"},\"value\":\"1\"}]},\"fa9116ea-7f2d-4a3a-a4e1-1b13f56c92c5\":{\"position\":{\"x\":969.3833312988281,\"y\":174},\"dynamicMetadata\":{},\"useDynamic\":false}}},\"Actions\":[{\"Identifier\":\"93a996a0-d7a8-492e-a2e8-a68cb20f18d9\",\"Parameters\":{\"FlowLoggingBehavior\":\"Enabled\"},\"Transitions\":{\"NextAction\":\"52e05d05-39db-4dc2-a37c-0678b693b466\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"UpdateFlowLoggingBehavior\"},{\"Identifier\":\"6b76aefa-8b96-4766-a3b8-308dd9833764\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"kvs init failed\",\"sfdc-RTT_flag__c\":\"0\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"be0d4794-8c59-427c-83d9-67906ab1c3d4\",\"Errors\":[{\"NextAction\":\"be0d4794-8c59-427c-83d9-67906ab1c3d4\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"Parameters\":{\"Text\":\"This is Salesforce calling. This call may be recording for training purposes.\"},\"Transitions\":{\"NextAction\":\"e2b252f0-ae0b-4489-8198-60e5eef36ce8\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"MessageParticipant\"},{\"Identifier\":\"e2b252f0-ae0b-4489-8198-60e5eef36ce8\",\"Parameters\":{},\"Transitions\":{},\"Type\":\"EndFlowExecution\"},{\"Identifier\":\"06696b27-35cc-47c3-b775-838c0b326f81\",\"Parameters\":{\"MediaStreamingState\":\"Enabled\",\"MediaStreamType\":\"Audio\",\"Participants\":[{\"ParticipantType\":\"Customer\",\"MediaDirections\":[\"From\"]}]},\"Transitions\":{\"NextAction\":\"be0d4794-8c59-427c-83d9-67906ab1c3d4\",\"Errors\":[{\"NextAction\":\"6b76aefa-8b96-4766-a3b8-308dd9833764\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactMediaStreamingBehavior\"},{\"Identifier\":\"52e05d05-39db-4dc2-a37c-0678b693b466\",\"Parameters\":{\"RecordingBehavior\":{\"RecordedParticipants\":[\"Agent\",\"Customer\"]}},\"Transitions\":{\"NextAction\":\"b8c6d167-dfd1-4ee2-b160-408e1690249a\",\"Errors\":[],\"Conditions\":[]},\"Type\":\"UpdateContactRecordingBehavior\"},{\"Identifier\":\"b8c6d167-dfd1-4ee2-b160-408e1690249a\",\"Parameters\":{\"Attributes\":{\"sfdc-RTT_flag__c\":\"1\",\"languageCode\":\"en-US\"}},\"Transitions\":{\"NextAction\":\"06696b27-35cc-47c3-b775-838c0b326f81\",\"Errors\":[{\"NextAction\":\"06696b27-35cc-47c3-b775-838c0b326f81\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"0ed25db1-2a6c-4c46-bec1-d953e3834a54\",\"Parameters\":{\"Attributes\":{\"start_fragment\":\"$.MediaStreams.Customer.Audio.StartFragmentNumber\",\"current_stream\":\"$.MediaStreams.Customer.Audio.StreamARN\"}},\"Transitions\":{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"Errors\":[{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"44fec6b4-fb4f-46b9-846e-dc83908d5e73\",\"Parameters\":{\"Attributes\":{\"error_desc\":\"trigger function failed\",\"sfdc-RTT_flag__c\":\"0\",\"process_error\":\"true\"}},\"Transitions\":{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"Errors\":[{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"UpdateContactAttributes\"},{\"Identifier\":\"be0d4794-8c59-427c-83d9-67906ab1c3d4\",\"Parameters\":{\"ComparisonValue\":\"$.Attributes.sfdc-RTT_flag__c\"},\"Transitions\":{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"Errors\":[{\"NextAction\":\"e54af739-9aec-4259-a54c-b1b45bf29599\",\"ErrorType\":\"NoMatchingCondition\"}],\"Conditions\":[{\"NextAction\":\"fa9116ea-7f2d-4a3a-a4e1-1b13f56c92c5\",\"Condition\":{\"Operator\":\"Equals\",\"Operands\":[\"1\"]}}]},\"Type\":\"Compare\"},{\"Identifier\":\"fa9116ea-7f2d-4a3a-a4e1-1b13f56c92c5\",\"Parameters\":{\"LambdaFunctionARN\":\"%%KVS_CONSUMER_TRIGGER_ARN%%\",\"InvocationTimeLimitSeconds\":\"8\"},\"Transitions\":{\"NextAction\":\"0ed25db1-2a6c-4c46-bec1-d953e3834a54\",\"Errors\":[{\"NextAction\":\"44fec6b4-fb4f-46b9-846e-dc83908d5e73\",\"ErrorType\":\"NoMatchingError\"}],\"Conditions\":[]},\"Type\":\"InvokeLambdaFunction\"}]}",
    "Tags": {}
  }
}
