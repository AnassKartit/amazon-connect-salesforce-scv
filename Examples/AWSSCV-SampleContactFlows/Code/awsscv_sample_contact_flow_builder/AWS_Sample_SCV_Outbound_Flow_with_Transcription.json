{"modules":[{"id":"93a996a0-d7a8-492e-a2e8-a68cb20f18d9","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"52e05d05-39db-4dc2-a37c-0678b693b466"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":73.4793187347932,"y":175.5}}},{"id":"6b76aefa-8b96-4766-a3b8-308dd9833764","type":"SetAttributes","branches":[{"condition":"Success","transition":"be0d4794-8c59-427c-83d9-67906ab1c3d4"},{"condition":"Error","transition":"be0d4794-8c59-427c-83d9-67906ab1c3d4"}],"parameters":[{"name":"Attribute","value":"kvs init failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null},{"name":"Attribute","value":"0","key":"sfdc-RTT_flag__c","namespace":null}],"metadata":{"position":{"x":456.4793187347932,"y":429}}},{"id":"fa9116ea-7f2d-4a3a-a4e1-1b13f56c92c5","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"0ed25db1-2a6c-4c46-bec1-d953e3834a54"},{"condition":"Error","transition":"44fec6b4-fb4f-46b9-846e-dc83908d5e73"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:376407789201:function:SCV08112020-kvsConsumerTrigger","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":1003.4793187347932,"y":174},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"be0d4794-8c59-427c-83d9-67906ab1c3d4","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"fa9116ea-7f2d-4a3a-a4e1-1b13f56c92c5"},{"condition":"NoMatch","transition":"e54af739-9aec-4259-a54c-b1b45bf29599"}],"parameters":[{"name":"Attribute","value":"sfdc-RTT_flag__c"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":700.4793187347932,"y":175},"conditionMetadata":[{"id":"ca5b348f-812c-4140-a690-a3f1d8d9f395","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"1"}]}},{"id":"44fec6b4-fb4f-46b9-846e-dc83908d5e73","type":"SetAttributes","branches":[{"condition":"Success","transition":"e54af739-9aec-4259-a54c-b1b45bf29599"},{"condition":"Error","transition":"e54af739-9aec-4259-a54c-b1b45bf29599"}],"parameters":[{"name":"Attribute","value":"trigger function failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null},{"name":"Attribute","value":"0","key":"sfdc-RTT_flag__c","namespace":null}],"metadata":{"position":{"x":1127.4793187347932,"y":461}}},{"id":"0ed25db1-2a6c-4c46-bec1-d953e3834a54","type":"SetAttributes","branches":[{"condition":"Success","transition":"e54af739-9aec-4259-a54c-b1b45bf29599"},{"condition":"Error","transition":"e54af739-9aec-4259-a54c-b1b45bf29599"}],"parameters":[{"name":"Attribute","value":"MediaStreams.Customer.Audio.StreamARN","key":"current_stream","namespace":"System"},{"name":"Attribute","value":"MediaStreams.Customer.Audio.StartFragmentNumber","key":"start_fragment","namespace":"System"}],"metadata":{"position":{"x":1401.4793187347932,"y":184}}},{"id":"e54af739-9aec-4259-a54c-b1b45bf29599","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e2b252f0-ae0b-4489-8198-60e5eef36ce8"}],"parameters":[{"name":"Text","value":"This is Salesforce calling. This call may be recording for training purposes.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1550.4793187347932,"y":702},"useDynamic":false}},{"id":"e2b252f0-ae0b-4489-8198-60e5eef36ce8","type":"Resume","branches":[],"parameters":[],"metadata":{"position":{"x":1827.9553929535432,"y":699.55029296875}}},{"id":"06696b27-35cc-47c3-b775-838c0b326f81","type":"StartMediaStreaming","branches":[{"condition":"Success","transition":"be0d4794-8c59-427c-83d9-67906ab1c3d4"},{"condition":"Error","transition":"6b76aefa-8b96-4766-a3b8-308dd9833764"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":385.4793187347932,"y":174},"fromCustomer":true,"toCustomer":false}},{"id":"52e05d05-39db-4dc2-a37c-0678b693b466","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"b8c6d167-dfd1-4ee2-b160-408e1690249a"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":72.4793187347932,"y":389.5}}},{"id":"b8c6d167-dfd1-4ee2-b160-408e1690249a","type":"SetAttributes","branches":[{"condition":"Success","transition":"06696b27-35cc-47c3-b775-838c0b326f81"},{"condition":"Error","transition":"06696b27-35cc-47c3-b775-838c0b326f81"}],"parameters":[{"name":"Attribute","value":"en-US","key":"languageCode","namespace":null},{"name":"Attribute","value":"1","key":"sfdc-RTT_flag__c","namespace":null}],"metadata":{"position":{"x":72,"y":608}}}],"version":"1","type":"outboundWhisper","start":"93a996a0-d7a8-492e-a2e8-a68cb20f18d9","metadata":{"entryPointPosition":{"x":49.095987435965064,"y":15},"snapToGrid":false,"name":"AWS_Sample_SCV_Outbound_Flow_with_Transcription","description":"Modified from: Sample_SCV_Outbound_Flow_With_Transcription - Adds error messaging for KVS/Lambda initialization failures. Passes a parameter to indicate if transcription should be present.","type":"outboundWhisper","status":"saved","hash":"764d8c2e3ef1ed107e268dc39f1e342b00b84f8adee2c4496370ce782505b53f"}}