{"modules":[{"id":"a2e856a6-b552-40be-a599-9f77fd6eb79a","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"fc899ff7-c46a-452b-939c-33e5e520c9a2"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":24.366668701171875,"y":181}}},{"id":"fc899ff7-c46a-452b-939c-33e5e520c9a2","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"ca7b58ed-98be-470f-af1b-b02aeab893e0"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Disable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":25.366668701171875,"y":362}}},{"id":"a1a9d0df-6f71-41fd-bee2-8b236ffee023","type":"SetAttributes","branches":[{"condition":"Success","transition":"817738cb-2e38-40d3-b2b8-98d4165a4f40"},{"condition":"Error","transition":"817738cb-2e38-40d3-b2b8-98d4165a4f40"}],"parameters":[{"name":"Attribute","value":"failed to set  agent whisper","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":31.513153076171875,"y":760.0933227539062}}},{"id":"ca7b58ed-98be-470f-af1b-b02aeab893e0","type":"SetEventHook","branches":[{"condition":"Success","transition":"817738cb-2e38-40d3-b2b8-98d4165a4f40"},{"condition":"Error","transition":"a1a9d0df-6f71-41fd-bee2-8b236ffee023"}],"parameters":[{"name":"Type","value":"AgentWhisper"},{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:376407789201:instance/ddfe75a7-69da-4613-a3bb-6f500094182f/contact-flow/a9fb2d29-5a07-4403-93b2-aeb1d5033001","resourceName":"AWSSCVAgentWhisperWithStreaming"}],"metadata":{"position":{"x":26.366668701171875,"y":542},"contactFlow":{"id":"arn:aws:connect:us-west-2:376407789201:instance/ddfe75a7-69da-4613-a3bb-6f500094182f/contact-flow/a9fb2d29-5a07-4403-93b2-aeb1d5033001","text":"AWSSCVAgentWhisperWithStreaming"},"customerOrAgent":false,"useDynamic":false}},{"id":"a355c649-31f7-4080-b6e1-69b0f8f38163","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"5fdb094d-aee2-4ea6-8e55-d257af32ecb5"},{"condition":"Error","transition":"1a2ac491-46e6-4b57-b240-8386dea00a30"}],"parameters":[],"metadata":{"position":{"x":2392.366668701172,"y":91},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"5fdb094d-aee2-4ea6-8e55-d257af32ecb5","type":"SetAttributes","branches":[{"condition":"Success","transition":"6e346866-f534-41dd-a7f8-1185143f6471"},{"condition":"Error","transition":"6e346866-f534-41dd-a7f8-1185143f6471"}],"parameters":[{"name":"Attribute","value":"queue limite exceeded","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":2637.943328857422,"y":89.66091918945312}}},{"id":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"a355c649-31f7-4080-b6e1-69b0f8f38163"}],"parameters":[{"name":"Text","value":"Transferring to Customer Support....","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2117.366668701172,"y":92},"useDynamic":false}},{"id":"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9","type":"SetQueue","branches":[{"condition":"Success","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"},{"condition":"Error","transition":"5a06a301-de90-4c6b-96cb-78f3645a6aa9"}],"parameters":[{"name":"Queue","value":"Sample","namespace":"User Defined","resourceName":null}],"metadata":{"position":{"x":1844.3666687011719,"y":94},"useDynamic":true,"queue":"Sample"}},{"id":"817738cb-2e38-40d3-b2b8-98d4165a4f40","type":"PlayPrompt","branches":[{"condition":"Success","transition":"afb3e3e1-3740-48d9-9588-1cdb3c4720bf"}],"parameters":[{"name":"Text","value":"Thank you for calling. All calls may be monitored for quality assurance.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":285.3666687011719,"y":89},"useDynamic":false}},{"id":"48e75255-35a6-49e7-9038-7a76525e9227","type":"SetAttributes","branches":[{"condition":"Success","transition":"9a140a86-ac4d-4583-950c-29c7fcf5791d"},{"condition":"Error","transition":"9a140a86-ac4d-4583-950c-29c7fcf5791d"}],"parameters":[{"name":"Attribute","value":"lambda loop fail","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":593,"y":369}}},{"id":"9a140a86-ac4d-4583-950c-29c7fcf5791d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ed704d14-0a7a-481f-8433-ae2737298ab2"}],"parameters":[{"name":"Text","value":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":839,"y":368},"useDynamic":false}},{"id":"ed704d14-0a7a-481f-8433-ae2737298ab2","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1079,"y":366}}},{"id":"afb3e3e1-3740-48d9-9588-1cdb3c4720bf","type":"Loop","branches":[{"condition":"Looping","transition":"af89b7be-14c3-40e7-a9ab-643748abe7ec"},{"condition":"Complete","transition":"48e75255-35a6-49e7-9038-7a76525e9227"}],"parameters":[{"name":"LoopCount","value":"2"}],"metadata":{"position":{"x":535,"y":93},"useDynamic":false}},{"id":"af89b7be-14c3-40e7-a9ab-643748abe7ec","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"283ba344-b7f8-4493-bddd-a6d243b14ba8"},{"condition":"Error","transition":"afb3e3e1-3740-48d9-9588-1cdb3c4720bf"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:376407789201:function:SCV08112020-InvokeTelephonyIntegrationApiFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"methodName","value":"createVoiceCall","namespace":null}],"metadata":{"position":{"x":1317,"y":467},"dynamicMetadata":{"methodName":false},"useDynamic":false},"target":"Lambda"},{"id":"283ba344-b7f8-4493-bddd-a6d243b14ba8","type":"SetAttributes","branches":[{"condition":"Success","transition":"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9"},{"condition":"Error","transition":"38305b2c-ffde-4811-9c77-28971cf722fc"}],"parameters":[{"name":"Attribute","value":"voiceCallId","key":"voiceCallId","namespace":"External"}],"metadata":{"position":{"x":1569.3666687011719,"y":95}}},{"id":"38305b2c-ffde-4811-9c77-28971cf722fc","type":"SetAttributes","branches":[{"condition":"Success","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"},{"condition":"Error","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"}],"parameters":[{"name":"Attribute","value":"set voiceObjectId failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":1598,"y":368}}},{"id":"1a2ac491-46e6-4b57-b240-8386dea00a30","type":"SetAttributes","branches":[{"condition":"Success","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"},{"condition":"Error","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"}],"parameters":[{"name":"Attribute","value":"transfer to queue failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":2393.366668701172,"y":329}}},{"id":"5a06a301-de90-4c6b-96cb-78f3645a6aa9","type":"SetAttributes","branches":[{"condition":"Success","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"},{"condition":"Error","transition":"88c4c809-af05-4960-8260-96d1a0cfe6c8"}],"parameters":[{"name":"Attribute","value":"set working queue failed","key":"error_desc","namespace":null},{"name":"Attribute","value":"true","key":"process_error","namespace":null}],"metadata":{"position":{"x":1930.3666687011719,"y":336}}},{"id":"6e346866-f534-41dd-a7f8-1185143f6471","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b5886cf6-27dd-44d4-a958-a1cd084c3cb4"}],"parameters":[{"name":"Text","value":"We are experiencing a higher than normal call volume.  Please try back later. Sorry for the inconvenience.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2875.366668701172,"y":90},"useDynamic":false}},{"id":"88c4c809-af05-4960-8260-96d1a0cfe6c8","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b5886cf6-27dd-44d4-a958-a1cd084c3cb4"}],"parameters":[{"name":"Text","value":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try back later. We apologize for any inconvenience. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2176,"y":549},"useDynamic":false}},{"id":"b5886cf6-27dd-44d4-a958-a1cd084c3cb4","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2951,"y":425}}}],"version":"1","type":"contactFlow","start":"a2e856a6-b552-40be-a599-9f77fd6eb79a","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"AWS_Sample_SCV_Inbound","description":"Modified from: Sample_SCV_Inbound_Flow_With_Transcription - Incorproates changes found in AWS_Sample_SCV_Inbound. Also passes a parameter to indicate if transcription should be present.","type":"contactFlow","status":"published","hash":"674df95019c9dbbe5f79ec132f0029b59e1540f9d8c42e98ffb2fdd309cda5df"}}