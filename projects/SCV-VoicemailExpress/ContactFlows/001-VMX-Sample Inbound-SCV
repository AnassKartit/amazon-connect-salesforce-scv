{"modules":[{"id":"2a4e0235-d9e3-4342-af6d-10dcc2cd6803","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"977c648f-ebbe-4775-8a0c-8a9c546bc736"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Disable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":44.366668701171875,"y":391.1470546722412}}},{"id":"4467aee3-29aa-4751-ad35-8072cb67c4c3","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1634,"y":833.1470546722412}}},{"id":"a2e856a6-b552-40be-a599-9f77fd6eb79a","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"2a4e0235-d9e3-4342-af6d-10dcc2cd6803"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":46.366668701171875,"y":180.1470546722412}}},{"id":"977c648f-ebbe-4775-8a0c-8a9c546bc736","type":"SetVoice","branches":[{"condition":"Success","transition":"e08bd015-f4d7-4494-8d13-a9738cb1830c"}],"parameters":[{"name":"GlobalVoice","value":"Joanna"}],"metadata":{"position":{"x":45.366668701171875,"y":602.1470546722412}}},{"id":"e08bd015-f4d7-4494-8d13-a9738cb1830c","type":"SetEventHook","branches":[{"condition":"Success","transition":"478bde82-a2ea-488e-a653-0249a34832cb"},{"condition":"Error","transition":"478bde82-a2ea-488e-a653-0249a34832cb"}],"parameters":[{"name":"Type","value":"AgentWhisper"},{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/a19199e2-e716-4c8f-a041-13a663c2960e","resourceName":"001-VMX-Sample Agent Whisper with Streaming-SCV"}],"metadata":{"position":{"x":46.717891693115234,"y":818.3998012542725},"contactFlow":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/a19199e2-e716-4c8f-a041-13a663c2960e","text":"001-VMX-Sample Agent Whisper with Streaming-SCV","arn":null,"metricDetail":null,"resourceId":null},"customerOrAgent":false,"useDynamic":false}},{"id":"478bde82-a2ea-488e-a653-0249a34832cb","type":"SetEventHook","branches":[{"condition":"Success","transition":"1c8f470a-17f9-4fb0-8922-931d8e57bfd6"},{"condition":"Error","transition":"1c8f470a-17f9-4fb0-8922-931d8e57bfd6"}],"parameters":[{"name":"Type","value":"CustomerQueue"},{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/d744ae0a-394b-4696-804e-5b7af5bce1a0","resourceName":"001-VMX-General Queue Option-SCV"}],"metadata":{"position":{"x":48.96593475341797,"y":1059.7626953125},"contactFlow":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/d744ae0a-394b-4696-804e-5b7af5bce1a0","text":"001-VMX-General Queue Option-SCV","arn":null,"metricDetail":null,"resourceId":null},"customerOrAgent":false,"useDynamic":false}},{"id":"1c8f470a-17f9-4fb0-8922-931d8e57bfd6","type":"SetAttributes","branches":[{"condition":"Success","transition":"1b3e66c4-9686-4b35-81d1-acd1f7ea3c3c"},{"condition":"Error","transition":"918bce19-adbf-43ba-9c13-f9d6d14af047"}],"parameters":[{"name":"Attribute","value":"en-US","key":"languageCode","namespace":null},{"name":"Attribute","value":"1","key":"test_mode","namespace":null},{"name":"Attribute","value":"5","key":"maxQueueTimeMinutes","namespace":null},{"name":"Attribute","value":"Cirrus Energy","key":"company","namespace":null}],"metadata":{"position":{"x":291,"y":22.667735937448022}}},{"id":"17438e3f-3894-4a10-920b-14ee96816984","type":"PlayPrompt","branches":[{"condition":"Success","transition":"640dba22-db2c-42b7-8c28-f000ff7a273c"}],"parameters":[{"name":"Text","value":"Our center is currently closed. We are connecting you to our voicemail system.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1405,"y":357.1470546722412},"useDynamic":false}},{"id":"640dba22-db2c-42b7-8c28-f000ff7a273c","type":"SetAttributes","branches":[{"condition":"Success","transition":"56ae1323-4661-4f5d-b681-3a16f16143cc"},{"condition":"Error","transition":"56ae1323-4661-4f5d-b681-3a16f16143cc"}],"parameters":[{"name":"Attribute","value":"queue","key":"vm_queue_type","namespace":null},{"name":"Attribute","value":"en-US","key":"vm_lang","namespace":null},{"name":"Attribute","value":"Queue.ARN","key":"vm_queue_arn","namespace":"System"},{"name":"Attribute","value":"Queue.Name","key":"vm_queue_name","namespace":"System"},{"name":"Attribute","value":"Customer Number","key":"vm_from","namespace":"System"},{"name":"Attribute","value":"Low","key":"vm_priority","namespace":null}],"metadata":{"position":{"x":1652,"y":395.1470546722412}}},{"id":"56ae1323-4661-4f5d-b681-3a16f16143cc","type":"Transfer","branches":[{"condition":"Error","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/704324e6-b270-4d4c-a7d3-c3f975843c63","resourceName":"001-VMX-Sample VM-SCV"}],"metadata":{"position":{"x":1655,"y":615.1470546722412},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/704324e6-b270-4d4c-a7d3-c3f975843c63","text":"001-VMX-Sample VM-SCV","arn":null,"metricDetail":null,"resourceId":null}},"target":"Flow"},{"id":"d36f4d8c-e538-4cb5-88e9-7ec90794e6c5","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4e0c7995-0705-42ee-aeb4-8d6ffdc2e9d1"}],"parameters":[{"name":"Text","value":"The current longest wait time is more than $.Attributes.maxQueueTimeMinutes minutes.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2826.737060546875,"y":102.66781616210938},"useDynamic":false}},{"id":"a355c649-31f7-4080-b6e1-69b0f8f38163","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"},{"condition":"Error","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"}],"parameters":[],"metadata":{"position":{"x":2193.3837890625,"y":748.4739894866943},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"e2f1dfb8-23aa-483e-88a4-ea05368d6c35","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"GreaterThan","conditionValue":"300","transition":"d36f4d8c-e538-4cb5-88e9-7ec90794e6c5"},{"condition":"NoMatch","transition":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c"}],"parameters":[{"name":"Attribute","value":"Metrics.Queue.OldestContactAge"},{"name":"Namespace","value":"System"}],"metadata":{"position":{"x":2446,"y":297.1470546722412},"conditionMetadata":[{"id":"348a1a23-805b-4bf2-a627-1a20f68a31ff","operator":{"name":"Is greater than","value":"GreaterThan","shortDisplay":">"},"value":"300"}]}},{"id":"4e0c7995-0705-42ee-aeb4-8d6ffdc2e9d1","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"dfa0b76f-d163-44ab-bf9d-6a8d2b76b092"},{"condition":"Timeout","transition":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c"},{"condition":"NoMatch","transition":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c"},{"condition":"Error","transition":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c"}],"parameters":[{"name":"Text","value":"If you don't want to wait, you may leave a voicemail and we will respond to it as soon as possible. To leave a voicemail, press 1.  Otherwise, just remain on the line and we will connect you to an agent as soon as possible.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":3140,"y":402.1470546722412},"conditionMetadata":[{"id":"2600cde8-5c3d-409e-842c-35f0fe51eb04","value":"1"}],"useDynamic":false},"target":"Digits"},{"id":"dfa0b76f-d163-44ab-bf9d-6a8d2b76b092","type":"SetAttributes","branches":[{"condition":"Success","transition":"2d4ffa7b-4a78-4c14-a2ce-63fce8bc257b"},{"condition":"Error","transition":"2d4ffa7b-4a78-4c14-a2ce-63fce8bc257b"}],"parameters":[{"name":"Attribute","value":"queue","key":"vm_queue_type","namespace":null},{"name":"Attribute","value":"en-US","key":"vm_lang","namespace":null},{"name":"Attribute","value":"vm","key":"deflection_mode","namespace":null},{"name":"Attribute","value":"Queue.ARN","key":"vm_queue_arn","namespace":"System"},{"name":"Attribute","value":"Queue.Name","key":"vm_queue_name","namespace":"System"},{"name":"Attribute","value":"Customer Number","key":"vm_from","namespace":"System"},{"name":"Attribute","value":"Low","key":"vm_priority","namespace":null}],"metadata":{"position":{"x":3529,"y":389}}},{"id":"2d4ffa7b-4a78-4c14-a2ce-63fce8bc257b","type":"Transfer","branches":[{"condition":"Error","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/704324e6-b270-4d4c-a7d3-c3f975843c63","resourceName":"001-VMX-Sample VM-SCV"}],"metadata":{"position":{"x":3991,"y":823},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/contact-flow/704324e6-b270-4d4c-a7d3-c3f975843c63","text":"001-VMX-Sample VM-SCV","arn":null,"metricDetail":null,"resourceId":null}},"target":"Flow"},{"id":"50f9cfed-a865-4298-85c0-0b798228d782","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"d36f4d8c-e538-4cb5-88e9-7ec90794e6c5"},{"condition":"NoMatch","transition":"e2f1dfb8-23aa-483e-88a4-ea05368d6c35"}],"parameters":[{"name":"Attribute","value":"test_mode"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":2260.948486328125,"y":15},"conditionMetadata":[{"id":"0e7fc9e7-cd87-45ee-9f0d-8be19c5cb13e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"1"}]}},{"id":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"a355c649-31f7-4080-b6e1-69b0f8f38163"}],"parameters":[{"name":"Text","value":"One moment while we connect you to a representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1999,"y":555.1470546722412},"useDynamic":false}},{"id":"bae9e75f-df70-4c47-af60-d8fbd7997926","type":"GetMetricData","branches":[{"condition":"Success","transition":"50f9cfed-a865-4298-85c0-0b798228d782"},{"condition":"Error","transition":"6710ab6a-3e1e-4a8f-9e61-ed7fac62116c"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/queue/55e20933-92d0-47dc-bfb1-dd5761a1be63","namespace":null,"resourceName":"sff_fallback_queue"}],"metadata":{"position":{"x":1937,"y":55.14705467224122},"useDynamic":false}},{"id":"95d8abd1-8fc4-4982-928d-52529ac364ff","type":"CheckHoursOfOperation","branches":[{"condition":"True","transition":"bae9e75f-df70-4c47-af60-d8fbd7997926"},{"condition":"False","transition":"17438e3f-3894-4a10-920b-14ee96816984"},{"condition":"Error","transition":"bae9e75f-df70-4c47-af60-d8fbd7997926"}],"parameters":[],"metadata":{"position":{"x":1653.2003173828125,"y":51.38210105895997}}},{"id":"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9","type":"SetQueue","branches":[{"condition":"Success","transition":"95d8abd1-8fc4-4982-928d-52529ac364ff"},{"condition":"Error","transition":"918bce19-adbf-43ba-9c13-f9d6d14af047"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/queue/55e20933-92d0-47dc-bfb1-dd5761a1be63","namespace":null,"resourceName":"sff_fallback_queue"}],"metadata":{"position":{"x":1391,"y":72.14705467224121},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/queue/55e20933-92d0-47dc-bfb1-dd5761a1be63","text":"sff_fallback_queue","arn":null,"metricDetail":null,"resourceId":null}}},{"id":"aed49b86-1b45-4b6f-9c76-a9c5580d8ccd","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"},{"condition":"Error","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"}],"parameters":[],"metadata":{"position":{"x":1115,"y":793.1470546722412},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4467aee3-29aa-4751-ad35-8072cb67c4c3"}],"parameters":[{"name":"Text","value":"Unfortunately, we have encountered an error. Please try your call again later. We apologize for the inconvenience. Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1401,"y":796.1470546722412},"useDynamic":false}},{"id":"b329d879-3f75-4e66-be6f-a315dbae4bde","type":"SetQueue","branches":[{"condition":"Success","transition":"aed49b86-1b45-4b6f-9c76-a9c5580d8ccd"},{"condition":"Error","transition":"8cc61213-dbb6-4ed4-b86e-00d043a4ecd6"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/queue/55e20933-92d0-47dc-bfb1-dd5761a1be63","namespace":null,"resourceName":"sff_fallback_queue"}],"metadata":{"position":{"x":833,"y":790},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-west-2:246268452856:instance/70ee8936-d46e-40ff-96aa-5bf8a6c7f47e/queue/55e20933-92d0-47dc-bfb1-dd5761a1be63","text":"sff_fallback_queue","arn":null,"metricDetail":null,"resourceId":null}}},{"id":"cb648498-0b69-4bb7-b804-1f796c3d5b90","type":"SetAttributes","branches":[{"condition":"Success","transition":"a36f4066-a2a9-4c0e-8047-9cdb428ea4e9"},{"condition":"Error","transition":"918bce19-adbf-43ba-9c13-f9d6d14af047"}],"parameters":[{"name":"Attribute","value":"voiceCallId","key":"voiceCallId","namespace":"External"}],"metadata":{"position":{"x":1111.3666687011719,"y":24.14705467224121}}},{"id":"918bce19-adbf-43ba-9c13-f9d6d14af047","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b329d879-3f75-4e66-be6f-a315dbae4bde"}],"parameters":[{"name":"Text","value":"We have encountered a system error. One moment while we find a representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":575,"y":296.1470546722412},"useDynamic":false}},{"id":"1b3e66c4-9686-4b35-81d1-acd1f7ea3c3c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"af89b7be-14c3-40e7-a9ab-643748abe7ec"}],"parameters":[{"name":"Text","value":"Thank you for calling $.Attributes.company. All calls may be monitored for quality assurance.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":564.3666687011719,"y":24.14705467224121},"useDynamic":false}},{"id":"af89b7be-14c3-40e7-a9ab-643748abe7ec","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"cb648498-0b69-4bb7-b804-1f796c3d5b90"},{"condition":"Error","transition":"918bce19-adbf-43ba-9c13-f9d6d14af047"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:246268452856:function:rockymtn--InvokeTelephonyIntegrationApiFunction","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"methodName","value":"createVoiceCall","namespace":null}],"metadata":{"position":{"x":837.3666687011719,"y":24.14705467224121},"dynamicMetadata":{"methodName":false},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"a2e856a6-b552-40be-a599-9f77fd6eb79a","metadata":{"entryPointPosition":{"x":15,"y":26.14705467224121},"snapToGrid":false,"name":"001-VMX-Sample Inbound-SCV","description":"Sample inbound contact flow that looks at current wait time and offers voicemail options depending on current conditions.","type":"contactFlow","status":"saved","hash":"879879b5f4e26acb6768c9941893138d75fe780e9953f603516a5b9edeb4e20a"}}