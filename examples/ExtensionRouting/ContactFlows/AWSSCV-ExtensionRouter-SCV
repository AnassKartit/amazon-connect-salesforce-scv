{"modules":[{"id":"67a38640-5064-4f0e-a4db-d23ddbac4bf0","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"62c12eca-22f1-4fe6-88a7-ab77c34f853e"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":55.83045959472656,"y":177.4913787841797}}},{"id":"c29f1981-f54a-4942-b7e7-436d74ece9dd","type":"SetAttributes","branches":[{"condition":"Success","transition":"46c158cb-9f87-4c2b-a72e-8cc340e8d64c"},{"condition":"Error","transition":"46c158cb-9f87-4c2b-a72e-8cc340e8d64c"}],"parameters":[{"name":"Attribute","value":"Stored customer input","key":"extension","namespace":"System"}],"metadata":{"position":{"x":970,"y":185}}},{"id":"5fd8e352-003b-4366-b5fe-6f7536ab00c2","type":"StoreUserInput","branches":[{"condition":"Success","transition":"c29f1981-f54a-4942-b7e7-436d74ece9dd"},{"condition":"Error","transition":"2d4ef02b-3ffc-4221-8418-51efec218287"}],"parameters":[{"name":"Text","value":"Please enter the extension you would like to reach, then press pound or hash.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":6},{"name":"EncryptEntry","value":false},{"name":"TerminatorDigits","value":"#","namespace":null},{"name":"DisableCancel","value":false}],"metadata":{"position":{"x":699,"y":185},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"2d4ef02b-3ffc-4221-8418-51efec218287","type":"PlayPrompt","branches":[{"condition":"Success","transition":"afa967ad-74af-48b2-b65f-d55b725e2ded"}],"parameters":[{"name":"Text","value":"I'm sorry, I didn't get your entry.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1227,"y":391},"useDynamic":false}},{"id":"66fda860-92dd-4ff2-91d6-2fb375186778","type":"SetQueue","branches":[{"condition":"Success","transition":"014f7ec7-17ba-4c2b-b595-2ff1a7c275a7"},{"condition":"Error","transition":"968b6aad-9537-4859-9289-1e83dd362520"}],"parameters":[{"name":"Agent","value":"agent_id","namespace":"External","resourceName":null}],"metadata":{"position":{"x":2312.578369140625,"y":321.1263122558594},"useDynamic":true,"queue":"agent_id"}},{"id":"989b43b5-01c5-43c5-bee7-8ef67315dbf3","type":"SetQueue","branches":[{"condition":"Success","transition":"1f10eace-7ee4-4a03-b70b-fdcfbdd6e936"},{"condition":"Error","transition":"1f10eace-7ee4-4a03-b70b-fdcfbdd6e936"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-west-2:925547398772:instance/871b2d6f-6637-405f-8c5e-9f732ef30a48/queue/350ed7d8-7abf-4d97-8d68-6a49a27942da","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":927.119873046875,"y":742.457763671875},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-west-2:925547398772:instance/871b2d6f-6637-405f-8c5e-9f732ef30a48/queue/350ed7d8-7abf-4d97-8d68-6a49a27942da","text":"BasicQueue"}}},{"id":"583d7034-0b89-4696-bc1f-bfe6c9f395ff","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":4009,"y":317}}},{"id":"47bc6761-001d-4c4f-9b56-de02e667c0c2","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"e5b6a130-99d4-4bfb-9179-5e39e7b01991"},{"condition":"Error","transition":"e5b6a130-99d4-4bfb-9179-5e39e7b01991"}],"parameters":[],"metadata":{"position":{"x":3375,"y":321},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"e5b6a130-99d4-4bfb-9179-5e39e7b01991","type":"PlayPrompt","branches":[{"condition":"Success","transition":"583d7034-0b89-4696-bc1f-bfe6c9f395ff"}],"parameters":[{"name":"Text","value":"We have encountered an error. Please try again later.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":3696.50048828125,"y":318.6870422363281},"useDynamic":false}},{"id":"014f7ec7-17ba-4c2b-b595-2ff1a7c275a7","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dba4de62-ad41-4050-9609-c6e7cc0ea0c6"}],"parameters":[{"name":"Text","value":"Placing you into the repesentative's queue. One moment please.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2585.5068359375,"y":323.4392395019531},"useDynamic":false}},{"id":"1f10eace-7ee4-4a03-b70b-fdcfbdd6e936","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dba4de62-ad41-4050-9609-c6e7cc0ea0c6"}],"parameters":[{"name":"Text","value":"I'm sending you to the main queue now. One moment please.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1242,"y":745},"useDynamic":false}},{"id":"2c4bc8c9-f273-4c26-8414-7cf065119440","type":"SetAttributes","branches":[{"condition":"Success","transition":"47bc6761-001d-4c4f-9b56-de02e667c0c2"},{"condition":"Error","transition":"e5b6a130-99d4-4bfb-9179-5e39e7b01991"}],"parameters":[{"name":"Attribute","value":"voiceCallId","key":"voiceCallId","namespace":"External"}],"metadata":{"position":{"x":3117.56103515625,"y":320.88067626953125}}},{"id":"dba4de62-ad41-4050-9609-c6e7cc0ea0c6","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"2c4bc8c9-f273-4c26-8414-7cf065119440"},{"condition":"Error","transition":"e5b6a130-99d4-4bfb-9179-5e39e7b01991"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:925547398772:function:SCV01-InvokeTelephonyIntegrationApiFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"methodName","value":"createVoiceCall","namespace":null}],"metadata":{"position":{"x":2862.0732421875,"y":319.35992431640625},"dynamicMetadata":{"methodName":false},"useDynamic":false},"target":"Lambda"},{"id":"afa967ad-74af-48b2-b65f-d55b725e2ded","type":"Loop","branches":[{"condition":"Looping","transition":"5fd8e352-003b-4366-b5fe-6f7536ab00c2"},{"condition":"Complete","transition":"989b43b5-01c5-43c5-bee7-8ef67315dbf3"}],"parameters":[{"name":"LoopCount","value":"3"}],"metadata":{"position":{"x":367,"y":296},"useDynamic":false}},{"id":"62c12eca-22f1-4fe6-88a7-ab77c34f853e","type":"SetVoice","branches":[{"condition":"Success","transition":"6c763ddf-3963-4042-acf4-9cce876ba3ce"}],"parameters":[{"name":"GlobalVoice","value":"Joanna"}],"metadata":{"position":{"x":59,"y":364}}},{"id":"6c763ddf-3963-4042-acf4-9cce876ba3ce","type":"SetEventHook","branches":[{"condition":"Success","transition":"afa967ad-74af-48b2-b65f-d55b725e2ded"},{"condition":"Error","transition":"afa967ad-74af-48b2-b65f-d55b725e2ded"}],"parameters":[{"name":"Type","value":"AgentWhisper"},{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:925547398772:instance/871b2d6f-6637-405f-8c5e-9f732ef30a48/contact-flow/ea2bc984-540b-4dc5-ae21-525575920473","resourceName":"AWSSCV-AgentWithStreaming"}],"metadata":{"position":{"x":59.30970001220703,"y":558.1195068359375},"contactFlow":{"id":"arn:aws:connect:us-west-2:925547398772:instance/871b2d6f-6637-405f-8c5e-9f732ef30a48/contact-flow/ea2bc984-540b-4dc5-ae21-525575920473","text":"AWSSCV-AgentWithStreaming","arn":null,"metricDetail":null,"resourceId":null},"customerOrAgent":false,"useDynamic":false}},{"id":"4a922018-5ff0-4858-ab04-8518184fb02e","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"success","transition":"66fda860-92dd-4ff2-91d6-2fb375186778"},{"condition":"NoMatch","transition":"968b6aad-9537-4859-9289-1e83dd362520"}],"parameters":[{"name":"Attribute","value":"result"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":2007,"y":329},"conditionMetadata":[{"id":"45593981-3f90-4e90-8e1c-62a377adfd9a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"success"}]}},{"id":"e157bc76-d371-4fc8-8b88-a73fbd053ae9","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"4a922018-5ff0-4858-ab04-8518184fb02e"},{"condition":"Error","transition":"968b6aad-9537-4859-9289-1e83dd362520"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:925547398772:function:awsscv_extension_routing_processor_scv_scv0100d3t000003d8tt","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"Id","value":"Id","namespace":"External"}],"metadata":{"position":{"x":1731.7755126953125,"y":177.6271209716797},"dynamicMetadata":{"Id":true},"useDynamic":false},"target":"Lambda"},{"id":"968b6aad-9537-4859-9289-1e83dd362520","type":"PlayPrompt","branches":[{"condition":"Success","transition":"afa967ad-74af-48b2-b65f-d55b725e2ded"}],"parameters":[{"name":"Text","value":"I couldn't find that extension.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1531,"y":485},"useDynamic":false}},{"id":"46c158cb-9f87-4c2b-a72e-8cc340e8d64c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"cb9189a1-1d06-4d3f-8c83-2e1017d87153"}],"parameters":[{"name":"Text","value":"One moment while I locate that extension.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1212,"y":183},"useDynamic":false}},{"id":"cb9189a1-1d06-4d3f-8c83-2e1017d87153","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"e157bc76-d371-4fc8-8b88-a73fbd053ae9"},{"condition":"Error","transition":"968b6aad-9537-4859-9289-1e83dd362520"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:925547398772:function:SCV01-InvokeSalesforceRestApiFunction","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"soql","value":"SELECT User.Id FROM User WHERE Extension = '$.Attributes.extension'","namespace":null},{"name":"Parameter","key":"methodName","value":"queryRecord","namespace":null}],"metadata":{"position":{"x":1454,"y":180},"dynamicMetadata":{"soql":false,"methodName":false},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"67a38640-5064-4f0e-a4db-d23ddbac4bf0","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"AWSSCV-ExtensionRouter-SCV","description":"Provides dial by extension option for Service Cloud Voice.","type":"contactFlow","status":"published","hash":"8bf2b1ff6aa2cfca19832a6b09070f1e283947d4c085f919d8b0e85597d396b3"}}